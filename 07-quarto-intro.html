<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.533">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>EDH 7916 - Reproducable Reports with Quarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./apple-touch-icon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="site-attachments/styles.css">
<meta property="og:title" content="EDH 7916 - Reproducable Reports with Quarto">
<meta property="og:image" content="https://capaldi.info/7916/apple-touch-icon.png">
<meta property="og:site_name" content="EDH 7916">
<meta property="og:image:height" content="180">
<meta property="og:image:width" content="180">
<meta name="twitter:title" content="EDH 7916 - Reproducable Reports with Quarto">
<meta name="twitter:image" content="https://capaldi.info/7916/apple-touch-icon.png">
<meta name="twitter:image-height" content="180">
<meta name="twitter:image-width" content="180">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./07-quarto-intro.html">Quarto</a></li><li class="breadcrumb-item"><a href="./07-quarto-intro.html">Reproducable Reports with Quarto</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">EDH 7916</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homepage</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-set-install.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">I: Installing R &amp; RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-set-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">II: Reading Data &amp; IPEDS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./x-01-set-git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra: Git &amp; GitHub</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Data Wrangling</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-wrangle-i.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">I: Enter the tidyverse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-wrangle-ii.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">II: Appending, joining, &amp; reshaping data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-wrangle-iii.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">III: Working with strings &amp; dates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-wrangle-iv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">IV: Tidyverse Tricks &amp; SQL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./x-04-wrangle-phil.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra: Skinner’s Philosophy of Data Wrangling</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Data Visualization</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-viz-i.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">I: Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-viz-ii.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">II: Customization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-viz-iii.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">III: Maps &amp; Spatial Data (Feat. APIs)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Quarto</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-quarto-intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Reproducable Reports with Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./x-02-quarto-dload-ipeds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra: Using Dr.&nbsp;Skinner’s Download IPEDS</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Programming</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-pro-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">I: Functions &amp; Loops</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-pro-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">II: Modeling Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./x-03-pro-vanilla.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra: Vanilla R (Data Wrangling I Redux)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Final Project</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./07-quarto-intro.html">Quarto</a></li><li class="breadcrumb-item"><a href="./07-quarto-intro.html">Reproducable Reports with Quarto</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Reproducable Reports with Quarto</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Lesson</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Assignment</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<section id="quarto-visual-editor" class="level2">
<h2 data-anchor-id="quarto-visual-editor">Quarto Visual Editor</h2>
<ul>
<li>One of the coolest features of Quarto vs plain RMarkdown is the visual editor
<ul>
<li>This functions like a very basic MS Word
<ul>
<li>It is a new feature, so sometimes can be buggy</li>
</ul></li>
</ul></li>
<li>There are still times the source editor works better
<ul>
<li>I find that for writing extended periods of text, the visual editor is really nice (especially with the Zotero integration covered in the <a href="">Quarto-Zotero extra credit</a>) However, for writing short amounts with code chunks, for hyperlinks, or for bullet point lists, the source editor is easier for me
<ul>
<li>As you learn markdown, the visual editor will probably be helpful in all situations, once you’re more comfortable with the syntax, you’ll likely prefer the source editor for some things</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sourcing-scripts" class="level2">
<h2 data-anchor-id="sourcing-scripts">Sourcing scripts</h2>
<p>In addition to using R in this course, you will also learn to use <a href="https://daringfireball.net/projects/markdown/">Markdown, a plain text markup language created by John Gruber in 2004</a>. If you’re thinking, no, not <em>another</em> language — rest assured that Markdown is very easy to learn and use. In fact, it’s possible you’ve already used Markdown (or a version of it) if you’ve ever used Slack or a lightweight writing tool like iAWriter.</p>
<section id="but-why-not-just-use-ms-word" class="level3">
<h3 data-anchor-id="but-why-not-just-use-ms-word"><em>But why not just use MS Word?</em></h3>
<p>Most people who do any writing on a computer are familiar with MS Word. Even people who don’t use MS Word likely write with a MS Word-like program. Since we’re all on the same page, why introduce a new way to write — why Markdown?</p>
<p>The primary reason to bother is that Markdown files are easier to share and better support replicability in a quantitative research workflow. Understanding why this it the case requires first understanding the difference in how each of these writing tools handles a document’s content and formatting.</p>
</section>
</section>
<section id="wysiwyg-vs-wysiwym" class="level2">
<h2 data-anchor-id="wysiwyg-vs-wysiwym">WYSIWYG vs WYSIWYM</h2>
<section id="what-you-see-is-what-you-get" class="level3">
<h3 data-anchor-id="what-you-see-is-what-you-get">“What you see is what you <em>get</em>”</h3>
<p><em>WYSIWYG</em> (pronounced how you might guess - “whizzy-whig”) stands for <em>what you see is what you get</em>. MS Word and similar programs are WYSIWYG writing tools. Want some text bolded? You highlight the text, click on the bold text button (or hit Control/Command-B) and the text becomes <strong>bold</strong>. Want 1.05” margins to increase the page count (teachers <em>always</em> know, by the way…), then you adjust the margins and watch the text squeeze a little and the page count increase.</p>
<p>The point is that as you write, you control the <em>content</em> and how it’s <em>formatted</em> at the same time. This is really powerful. You can see your document (literally) taking shape and when you’re done writing, you’re mostly done formatting, too.</p>
<p>But one problem from a research perspective is that WYSIWYG document preparation programs don’t always share well, meaning that the formatting isn’t always preserved across computers or operating systems. Sometimes equations don’t open correctly; the font you selected doesn’t exist on another computer. While programs may be able to open each other’s files (<em>e.g.</em> OpenOffice can open a <code>.docx</code> file), that’s not always the case. They open different-program files with many errors or even not at all.</p>
<p>The second problem is they don’t work well with reproducible workflows. Let’s say you’ve done some data analysis and make 10 tables and 10 figures. You’ve carefully placed and formatted in your MS Word report. Perfect! But before giving to your supervisor or submitting to a journal, you get some new data and need to rerun everything…ah! You’ll have to go through the whole transfer and formatting process again, increasing the likelihood of introducing errors.</p>
</section>
<section id="what-you-see-is-what-you-mean" class="level3">
<h3 data-anchor-id="what-you-see-is-what-you-mean">“What you see is what you <em>mean</em>”</h3>
<p><em>WYSIWIM</em> (“whizzy-whim”), on the other hand, separates formatting from content. Rather than making bold text bold, you instead add a bit of markup — some special syntax — to the text you want to be bold. Only when the document is finally <em>compiled</em> into the final form will the <strong>text be bold</strong>.</p>
<p>Markdown syntax uses plain text characters to indicate formatting. This lesson was written in Markdown, so to show you an example, here’s the prior paragraph, in plain Markdown syntax:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>_WYSIWIM_ ("whizzy-whim"), on the other hand, separates formatting</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>from content. Rather than making bold text bold, you instead add a bit</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>of markup --- some special syntax --- to the text you want to be</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>bold. Only when the document is finally _compiled_ into the final</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>form will the **text be bold**. </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Markdown solves the two problems noted above. First, it’s written in plain text, which means that it can be opened on any computer running any operating system. Even if the end user doesn’t have a way to compile the raw Markdown syntax into the nice-looking final form, the text is still very legible. In fact, this feature — ability to read uncompiled — was a motivating force behind the development of Markdown:</p>
<blockquote class="blockquote">
<p>The idea is that a Markdown-formatted document should be publishable as-is, as plain text, without looking like it’s been marked up with tags or formatting instructions. <a href="https://daringfireball.net/projects/markdown/"><em>(John Gruber, Markdown website)</em></a></p>
</blockquote>
<p>Second, because it’s plain text, it integrates well with scripting languages like R. Remember our example from before? If your final report was in Markdown instead of MS Word, you could rerun your analyses with the updated data and then recompile your final report — tables and figures updated automatically!</p>
<p>In fact, R and Markdown work so well together that you can combine them in a single — appropriately named — RMarkdown document that takes a combined file ending:</p>
<ol type="1">
<li>R script: <code>analysis.R</code></li>
<li>Markdown script: <code>write_up.md</code></li>
<li>RMarkdown script: <code>report.Rmd</code></li>
</ol>
<p>or</p>
<p><code>analysis.R</code> + <code>write_up.md</code> = <code>report.Rmd</code></p>
<p>We’ll keep our R and Markdown scripts separate at first, but know that you’ll submit an RMarkdown file for your final project.</p>
</section>
</section>
<section id="markdown-syntax" class="level2">
<h2 data-anchor-id="markdown-syntax">Markdown syntax</h2>
<p>Rather than list Markdown syntax here, I’ll direct you to an excellent resource: <a href="https://www.markdownguide.org"><em>The Markdown Guide</em></a>. On this site, you find example of both <a href="https://www.markdownguide.org/basic-syntax/">basic syntax (headers, italics, bold, links)</a> and <a href="https://www.markdownguide.org/extended-syntax/">more advanced syntax (tables and footnotes)</a>.</p>
<p>Here’s an example from the <a href="https://www.markdownguide.org/basic-syntax/">Markdown Guide basic syntax page for making headers</a>:</p>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="site-attachments/btskinner-imgs/markdown_guide_example.png" class="img-fluid figure-img"></p>
<figcaption>Markdown Guide</figcaption>
</figure>
</div>
<p>On the left you have the Markdown syntax. To make a header, just put a pound sign / hash (<code>#</code>) in front of the line. As you want smaller headers, just keep adding pound signs. The middle column shows you the underlying <a href="https://en.wikipedia.org/wiki/HTML">HTML (web markup language)</a> code. This isn’t that important for us. The last column, however, shows the text as it will render in your final document.</p>
<p>The site is also nice in that it shows you a few different ways, when they exist, of doing the same thing. Take some time to go through the site — it won’t take long — and keep it in mind as a reference for the future.</p>
</section>
<section id="other-references" class="level2">
<h2 data-anchor-id="other-references">Other references</h2>
<ul>
<li><a href="https://plain-text.co">The Plain Person’s Guide to Plain Text Social Science</a>, by Kieran Healy (very short, but the first chapters make a strong case for using plain text when doing quantitative social science)</li>
</ul>
<p>In this lesson, we’ll combine many of the pieces we’ve already covered — reading in data, cleaning data, making figures — into a single RMarkdown document. We’ll purposefully keep it simple at first by reusing some code we’ve seen before.</p>
</section>
<section id="getting-started" class="level2">
<h2 data-anchor-id="getting-started">Getting started</h2>
<p>To properly compile a PDF documents from Markdown, you’ll need some version of <a href="https://www.latex-project.org/get/">LaTeX</a>, a typesetting system best known for being able to nicely render mathematical notation but that is really useful for making reproducible documents. You should have already downloaded this at the start of the course. If you didn’t, visit the <a href="../software/index.html">software page</a> for information on how to get it.</p>
<p>If you are unable to get LaTeX to install properly or cannot get the document to compile as PDF, you should be able to compile to HTML instead.</p>
<p>You will also need the R <strong>knitr</strong> and <strong>rmarkdown</strong> libraries. You should have <strong>rmarkdown</strong> already, but if you haven’t already installed either, type</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"knitr"</span>,<span class="st">"rmarkdown"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>into your R console. <strong>NOTE</strong> that even if you’ve already installed rmarkdown, <code>install.packages()</code> will just quickly reinstall it.</p>
</section>
<section id="what-is-rmarkdown" class="level2">
<h2 data-anchor-id="what-is-rmarkdown">What is RMarkdown?</h2>
<p><a href="https://rmarkdown.rstudio.com/articles_intro.html">From the RStudio website</a>:</p>
<blockquote class="blockquote">
<p>R Markdown is a file format for making dynamic documents with R. An R Markdown document is written in markdown (an easy-to-write plain text format) and contains chunks of embedded R code…</p>
</blockquote>
<p>In other words, an RMarkdown (hereafter <em>RMD</em>) document has two basic components:</p>
<ul>
<li>R code (in <strong>code chunks</strong>)</li>
<li>Markdown text (most everything else outside of the code chunks)</li>
</ul>
<p>RMD documents use the file ending, <code>*.Rmd</code>, which makes sense as they combine <code>R</code> code with <code>md</code> text. To <em>compile</em> an RMD file, meaning to</p>
<ol type="1">
<li>convert the plain Markdown text into formatted text</li>
<li>run R code, producing all output along the way</li>
<li>combine the Markdown text plus R output into a finished document</li>
</ol>
<p>You will use the <strong>rmarkdown</strong> <code>render()</code> function, which in turn uses the <strong>knitr</strong> <code>knit()</code> function under the hood. <a href="https://stackoverflow.com/a/40563480">It can be a bit confusing how all the pieces work together</a>, but luckily, you can use RStudio’s point-and-click interface to knit your documents.</p>
</section>
<section id="starting-a-new-document" class="level2">
<h2 data-anchor-id="starting-a-new-document">Starting a new document</h2>
<p>When you open a blank RMarkdown document, RStudio will by default fill it with some example text that looks like this. You can change this in RStudio’s settings, but I think it’s helpful to see the skeleton of an RMarkdown document (plus, it’s not a big deal to just erase the parts you don’t need).</p>
<section id="example-text-in-new-file-started-via-rstudio-default" class="level4">
<h4 data-anchor-id="example-text-in-new-file-started-via-rstudio-default">Example text in new file started via RStudio (default)</h4>
<pre><code>---
title: "Document Title"
author: "Benjamin Skinner"
date: "1/30/21"
output: pdf_document
---</code></pre>
</section>
<section id="r-markdown" class="level3">
<h3 data-anchor-id="r-markdown">R Markdown</h3>
<p>This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
<p>When you click the <strong>Knit</strong> button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     speed           dist       
 Min.   : 4.0   Min.   :  2.00  
 1st Qu.:12.0   1st Qu.: 26.00  
 Median :15.0   Median : 36.00  
 Mean   :15.4   Mean   : 42.98  
 3rd Qu.:19.0   3rd Qu.: 56.00  
 Max.   :25.0   Max.   :120.00  </code></pre>
</div>
</div>
</section>
</section>
<section id="including-plots" class="level2">
<h2 data-anchor-id="including-plots">Including Plots</h2>
<p>You can also embed plots, for example:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="07-quarto-intro_files/figure-html/pressure-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Note that the <code>echo = FALSE</code> parameter was added to the code chunk to prevent printing of the R code that generated the plot.</p>
<p>Rather than going through this example text to learn about RMarkdown, we’ll use our own example document, <code>test_scores.Rmd</code>, which is linked above.</p>
</section>
<section id="compile-an-rmarkdown-document" class="level2">
<h2 data-anchor-id="compile-an-rmarkdown-document">Compile an RMarkdown document</h2>
<p>We’ll go through the main sections our example RMD document below. So you can follow along better, you should compile <code>test_scores.Rmd</code> as your first step.</p>
<p>Once you’ve downloaded the file and data (if you don’t have it already), place the RMD file in the <code>scripts</code> directory and the unzipped data in the <code>data</code> directory.</p>
<p>When you open <code>test_scores.Rmd</code> in RStudio, you should see a button in the upper left facet that says <strong>Knit</strong> with a ball of string icon.</p>
<p><img src="site-attachments/btskinner-imgs/rstudio_rmarkdown.png" class="img-fluid"></p>
<p>If you have the working directory correctly set to <code>scripts</code> and have placed the <code>sch_test/</code> data folder inside <code>data</code>, you should be able to click <strong>Knit</strong> and have the document compile into a PDF. By default, RStudio will open a PDF viewer window or show you the file in the lower right facet in the <strong>Viewer</strong> tab.</p>
<p><strong>NOTE</strong> that if you’ve had trouble with LaTeX, you should be able to compile into an HTML file, which you can open in your browser.</p>
</section>
<section id="sections-of-our-document" class="level2">
<h2 data-anchor-id="sections-of-our-document">Sections of our document</h2>
</section>
<section id="yaml-header" class="level2">
<h2 data-anchor-id="yaml-header">YAML header</h2>
<p>YAML, which stands for <a href="https://yaml.org">“YAML Ain’t a Markup Language”</a>, is a common way to configure dynamic documents like RMD documents. It’s the first thing you see at the top of an RMarkdown file. The YAML header is this piece of code:</p>
<p>Notice the opening and closing three hyphens (<code>---</code>). This is how R knows that this section of code is special. The YAML can become complex, as you add document options, but for now we keep it simple:</p>
<ul>
<li><strong>title</strong>: the document title (printed)</li>
<li><strong>author</strong>: the document author (printed)</li>
<li><strong>date</strong>: manually set date (printed)
<ul>
<li>leave <strong>date</strong> out of YAML and the date on which the document is compiled will be added automatically, or you can use the LaTeX macro <code>\today</code>, which will also print today’s date</li>
<li>set <strong>date</strong> to <code>""</code> (empty string) for no printed date</li>
</ul></li>
<li><strong>output</strong>: document output
<ul>
<li><code>pdf_output</code>: for PDF (uses LaTeX)</li>
<li><code>html_output</code>: for web page output (open in browser)</li>
<li><code>word_output</code>: for MSWord output (uses MSWord)</li>
</ul></li>
</ul>
<p>We’re using <code>pdf_output</code> but you can either change this setting or override it when compiling the final document.</p>
<p><strong>NOTE</strong> that the colon (<code>:</code>) is a special character in YAML. Notice that I don’t necessarily have to use quotation marks for strings with spaces — I do for the title, but not for my name. That said, if your title includes a colon, you need to wrap the entire title string in double quotation marks (<code>"</code>) — otherwise the document won’t compile.</p>
</section>
<section id="code-chunks" class="level2">
<h2 data-anchor-id="code-chunks">Code chunks</h2>
<p>In general, an RMD code chunk looks like a markdown code chunk. The key difference between the two is that while a plain markdown code chunk is purely about formatting, the RMD code chunk will by default try to run the code and print any output:</p>
<section id="markdown-code-chunk" class="level4">
<h4 data-anchor-id="markdown-code-chunk">Markdown code chunk</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## this is just a representation </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="do">## when compiled: nothing happens, only code is printed</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="rmarkdown-code-chunk" class="level4">
<h4 data-anchor-id="rmarkdown-code-chunk">RMarkdown code chunk</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## this is active R code</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="do">## when compiled: the R code is run, and both code and results are printed</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1]  0.209847573  1.027511057  0.408022282  0.113162285  0.990117599
   [6]  1.017782351 -1.981524378  1.704157206 -1.248041813  0.529427210
  [11]  0.144158519 -0.234962325  0.607293640 -1.961293152 -0.262609962
  [16] -1.905606035  0.883287241  0.626797292 -1.899006075  1.163672037
  [21] -0.378064865  1.654684193  1.614823489  0.399041265 -0.777805712
  [26]  1.201046199  0.521418644  1.232724524 -0.751224399  0.395843460
  [31]  0.440877457 -1.527838830 -1.075509824 -0.031749610 -0.095935411
  [36]  0.233926630 -1.664885706 -0.007407225 -0.588234633 -1.286077155
  [41]  0.609011757 -0.023575619  0.084323120 -0.017380248  1.937511459
  [46] -0.668694162 -0.413468736  1.276775785 -0.516100077 -1.202931434
  [51] -0.904330174  1.366283855 -1.078716119 -0.823231678 -0.122543377
  [56]  0.099702935 -0.248457678  1.035257336  0.393809796 -0.208159733
  [61]  0.551219974 -0.130115013  0.405809156  0.398110381  0.481548442
  [66] -0.688434582  0.600006235  0.109193188 -0.686418319  0.239122300
  [71] -0.643702508 -1.372625902 -0.518336501  0.342312186 -0.697651515
  [76]  3.267135179  0.585908444  2.112822606 -0.315412125  0.561138574
  [81]  0.494207891 -0.907380413 -0.924209226 -0.446038471  0.806695869
  [86] -0.631470259  0.031152180 -1.701069610 -0.525233018  0.120266804
  [91] -0.302181483 -1.413113057  0.435367311 -0.358179088 -0.023393625
  [96]  0.521453429 -1.364085893  0.765849845  3.082036391  0.105201797
 [101]  0.807447591  1.759589484 -0.796930507 -1.181598866 -0.047457664
 [106] -0.004023087  1.654606635  0.504350341 -0.516298801 -0.546897412
 [111] -0.823374624 -1.426414805 -0.173655031  0.798457508  1.888597652
 [116] -0.104508879 -0.322199300 -0.384181719 -0.209164061 -0.466183674
 [121] -0.424651339 -1.076612901  0.550014845  1.455909308 -0.281413262
 [126] -0.962886242  1.147025254  0.401306549  1.407433669  0.223321874
 [131] -0.678571711 -0.757977779 -0.562019757  1.627740986  0.600977436
 [136]  0.758043311  0.279561168 -1.255656513  1.959638948  0.023156566
 [141]  0.096044686 -0.054552958  1.487711355 -1.091606062 -0.606116934
 [146] -0.644819003 -2.846076977  0.550627148 -1.260502091 -1.970293278
 [151]  1.300146501  1.396763606 -0.402465517 -1.327961368 -0.102823880
 [156] -0.962075814 -0.416769748 -2.418079661 -1.487690446  0.820407817
 [161]  1.281266920  0.091746617 -1.183097655  0.486797419 -1.173895785
 [166] -1.060303060 -1.593802450  0.319101272  2.197839388 -0.017461388
 [171] -0.811815860 -2.272692307 -0.460277046  1.251922961 -0.730594577
 [176]  0.525570494  1.020705686 -0.846391540  0.372380930 -0.229648004
 [181]  0.949453653 -0.186265919 -0.960468507 -0.523872207  0.461956380
 [186] -1.397967978 -0.322566875  0.764045136 -1.714067265 -0.609222794
 [191] -0.341357485 -0.436977030  0.689761135  2.044737278  1.017721637
 [196]  1.629408826 -0.059165968  0.193191483  1.798268163 -1.838126952
 [201]  0.172781842 -0.088235311  0.595953998  2.071286499 -0.307805192
 [206] -0.310898197  2.749414548 -0.966048618  0.293047970  0.116096865
 [211]  1.100630554 -1.558360957  0.512071650  0.829701801 -0.823158974
 [216] -1.085524049 -1.097486067 -2.004524211  0.015887312 -0.641280023
 [221]  0.351180422  2.248759170 -0.345379634  0.953161668  1.881106689
 [226] -1.040768928 -1.534708856 -0.235221842  0.257148244  1.479131761
 [231]  0.837175178  0.166937974  0.668581033 -0.177940005  0.796362749
 [236]  2.210115124  0.986217589 -0.927746569 -0.692456447 -1.565786027
 [241] -0.291179609  2.070820774  0.479039248  0.935473132 -1.363419416
 [246] -0.225003440 -1.727152652  0.459640125  0.683308302  0.026332427
 [251]  0.051151416 -0.296045365 -2.333412682  1.221046700  1.140932821
 [256]  0.557474549  0.041094891  2.589162219 -0.281725199  1.553254271
 [261]  0.774938462 -1.422898269 -0.261337724 -1.410347474  0.924671629
 [266]  1.080151082 -1.015172501 -0.288986486  0.238988553  0.750619788
 [271]  0.413922473 -1.626169469 -0.355259657 -0.939677653 -0.683697490
 [276]  1.656071493  1.774835513 -3.123881318 -0.249249953 -1.014152238
 [281] -0.602587042 -0.656258060 -1.061119997 -0.238720371  0.109452830
 [286] -0.493890395  0.133213471  1.107168101  2.784823617  0.556843800
 [291]  2.212184605 -1.702766951 -1.709405972  0.555080282 -0.674043059
 [296] -0.435851477 -2.440430525 -0.216627507  0.299834340 -0.674267195
 [301] -0.855482242 -0.797763926 -0.094893980  1.013183596 -2.010616216
 [306] -0.004871965 -1.107452486  0.993400685 -1.069543759  0.323211755
 [311]  1.122324066  0.112879715  0.471041237  0.662478407  0.104630745
 [316] -0.848695537 -0.382711032  0.383124970 -1.189980918  0.032738908
 [321]  1.773247864 -0.382059633  0.839978064  0.746310007 -0.916231992
 [326]  0.326816834 -0.823142266 -0.930679885  0.634639861  1.074017746
 [331]  0.102394516  1.849503751 -0.535914126  0.989073697 -2.738555736
 [336]  1.163677746 -0.050093039  0.991862071 -0.282526203  0.121367448
 [341] -0.339944316  1.216885735  0.152036009  2.293655645 -1.488794363
 [346]  0.746299055  1.355183382 -0.883672607 -0.833271150 -1.178141041
 [351] -0.156635443 -0.810828952  2.272804543  0.086057177  1.007259363
 [356]  1.888025226  0.956738779 -1.659359181  0.576689902 -0.444590358
 [361] -0.279399309 -1.372837317  0.468404825 -0.885184474  0.599369705
 [366]  0.077838588  1.244615022 -1.728373135  0.352564860  0.955481941
 [371] -1.301694264 -2.540849320 -2.401958834  1.798219497  1.223269745
 [376]  0.664702296  0.120464775  0.079478885 -0.953415629  0.357593556
 [381] -2.184770728  0.139025772  0.968196787  0.682114266  1.775788619
 [386] -1.671567195  0.773940185  0.693917391 -0.555572681  0.241710561
 [391]  0.087812557  0.256963612 -0.228909202 -0.894592269 -1.265184492
 [396]  1.149117646  0.245523660 -0.368758220  0.345707797 -1.688438502
 [401] -0.205377078 -0.955716249  0.383090043  0.199487192 -0.957783058
 [406] -0.567689877  1.305324715 -1.326729596  0.507846777  0.668840971
 [411]  1.258672830  0.927305638  0.298643552  0.278974415 -0.295595563
 [416] -0.557300675  0.542193601 -2.478944860  0.724136544  0.192587125
 [421] -0.297398474 -1.500171412 -2.153094200 -0.328763376 -0.260138045
 [426] -1.929601514  2.006918275 -0.218941655 -0.258235199  0.020003564
 [431] -1.885103576 -0.389834265  0.272405375 -0.220174063 -0.216308300
 [436]  0.815496083 -0.778227492 -0.633647800  2.085322344 -1.631721326
 [441] -2.756944618  0.705833241 -0.662009410  0.431179552  1.200112232
 [446]  1.128700304 -0.947796075 -1.692584041 -0.059027693 -1.005910440
 [451] -1.209858169  0.379151157  0.678673777 -0.655731801  0.591398219
 [456]  0.634033548  0.469238834  0.651671403 -0.048998736  0.245238663
 [461] -1.205912111  1.462698605 -0.113817691  0.103608570  0.917777561
 [466] -0.770405344 -0.640376266 -0.955248759  0.784478528 -0.034786355
 [471] -0.355541514  1.481623248 -0.900788320 -0.871618855 -1.135087199
 [476]  0.715835817  0.802278283  0.001081654  0.095626849 -0.477888284
 [481] -0.632742663  1.992558546  0.501210828  1.131451679 -0.175869314
 [486] -1.227906805  0.446489094  0.502061172  1.050319769 -0.420542571
 [491] -0.094935032  1.415298743  1.505392298 -1.092874204  0.562047094
 [496] -1.733344010 -2.120978629  0.169603518 -0.456439409 -1.245534466
 [501] -1.007511403  0.028430086  0.929367680 -0.122521785 -1.530287561
 [506] -0.672301283 -0.469221951  0.193156572 -1.615737098  0.441751115
 [511]  2.141859587  0.360869242  0.395255485 -0.755577066  1.655005123
 [516] -0.561521064  0.306058573 -0.688296149 -0.974314806 -1.619253138
 [521]  0.683957229 -2.800498230  1.550652873 -0.568897493  0.399812271
 [526]  0.942908203  1.222512037  2.468531253 -0.269885747  1.090806104
 [531] -0.370893597  0.672543785 -1.129330304 -1.639388790  0.292720200
 [536] -0.673718873  0.264681500  1.309773275 -0.130965269 -2.325403767
 [541]  0.426104093 -0.767331378  1.071177351  1.271611735  0.318948240
 [546] -0.783061564  0.667173396  0.827095046  0.474600807 -1.310593741
 [551] -0.300124745  0.762934897  1.169891128 -0.822637163  1.620594734
 [556]  0.721210973  0.325276696  0.127780700 -0.477563193 -1.256159783
 [561]  0.114396745  0.135497169  1.782803111 -1.497969239 -0.483038076
 [566] -0.443830809 -0.722897847 -1.318807633 -0.009669900 -0.267542928
 [571]  1.278640832 -0.918141666  1.324699749 -0.957447199  0.942130095
 [576] -1.456084649  1.675957419 -0.444970491 -2.012019439 -0.300681897
 [581]  0.878175318  2.288602262  0.422397345  0.523416392  0.140425387
 [586] -0.651344403 -2.417007910  1.167856707 -0.131359615  0.156767607
 [591]  0.059106403 -0.160727445 -1.003727629  0.921911007  0.803011508
 [596]  0.793183876 -1.430688312 -1.533120230 -1.616794818 -0.558528155
 [601] -0.201323123 -0.173934348  0.626691083  0.198828740 -1.513695387
 [606]  0.088255598 -0.384403816 -0.488195598  0.746775026  1.295613534
 [611]  0.971729035  1.396467515  1.505865085  0.115677377  0.122883918
 [616]  1.081344810  1.562120125 -1.337841232  1.760613436 -0.378283506
 [621]  0.136033891 -0.773317264  0.940671216  0.087989022  0.748159335
 [626] -1.099052205 -1.856188326 -0.092122410 -0.301980923 -0.282106277
 [631]  0.672839428  0.835846682 -0.053481983  0.140570978 -0.888890092
 [636]  1.147384686 -0.715994715  1.103242723 -0.641082855  0.624738255
 [641]  1.730467921 -0.374097026 -0.043416042  0.307895225 -1.113690058
 [646]  0.421805898 -0.878175937 -0.045471058 -1.401237984 -1.354497707
 [651] -0.496202168 -1.249487357 -0.154437084  0.168661946  0.705778738
 [656] -1.425340338 -0.326343161  0.481276726 -0.221668392  0.411290629
 [661]  0.651882464  2.703272973  1.237125415  0.297864589  0.792532493
 [666] -0.155443713 -0.530944984  1.284911034 -0.674933103 -0.658569162
 [671]  0.926919172 -1.281183775 -0.688820161 -1.118966684  0.677370741
 [676]  0.374100489 -0.286028296 -0.256218976  0.193003758  0.006522263
 [681] -1.775294288 -0.344842742  0.401490718 -0.559957764  2.607703765
 [686] -1.477802313  0.941187104  0.241937985 -0.326427056  0.294393035
 [691]  1.103443309 -0.350202036 -1.254986107 -1.367908291 -0.470785288
 [696] -2.101418121  1.399035749  1.343003281  1.858223170 -1.565783821
 [701]  1.126701605 -1.526393770  1.334554026  0.020871170  0.183452508
 [706]  0.674118525  0.199557872  0.325946066 -0.398340963 -0.646132696
 [711]  0.243197830 -1.318321809  0.419328381  1.575684241  1.263322260
 [716] -1.583885828 -0.552136317 -1.147667405  0.811592935  0.790900821
 [721] -1.265552805 -0.108149839 -0.503669008 -1.519774768  0.048248858
 [726]  1.210239069  0.450719710 -0.948948843 -1.401815923  0.753868797
 [731] -1.446314848  2.000327405 -0.185098522  0.811784907  0.274472690
 [736] -0.399573978 -0.508542982 -0.001509922 -0.373609672 -0.388621346
 [741] -0.672283097  1.547088066 -0.348195019 -2.194281730 -1.678152302
 [746]  0.130120660  0.075566650  0.280752796  0.691369270  1.911001879
 [751] -0.988304878 -0.551555006  0.019375149  0.961761077  0.784639292
 [756]  1.323399844 -0.118682032  0.880748160 -1.285082138  1.612166388
 [761]  0.224655294 -0.341393454  1.193399833 -0.771865616  2.169905024
 [766] -1.087035927 -0.033223450  1.331876338 -2.386432426  1.954283032
 [771]  0.903720750 -0.120027178  0.406348922 -0.621052943 -1.423626403
 [776] -0.570775055  0.232239166  1.864531482  1.335613910 -2.733378333
 [781] -0.256343899  0.263659486  2.257574666 -0.232987075 -0.235692623
 [786] -1.105877772 -1.353820798  1.166705195  0.443261038  1.146709804
 [791] -1.293973648 -0.725511270  0.970444656  2.690616722 -0.487673542
 [796]  0.332469392  1.424467407  2.224219789  0.857727633 -0.741948641
 [801] -1.046413394  1.122216231 -0.523606038  1.740793949 -2.099775417
 [806] -1.285279777  1.018923302 -0.932241436  0.453863569  1.165989536
 [811] -0.126434641 -1.753386088 -0.062627285  0.647875573 -0.182152464
 [816]  0.779802052 -0.880434256 -0.457220513 -0.137296460 -1.068019818
 [821]  0.082573178  0.402808519 -0.234204245 -1.746738467 -0.431769335
 [826] -0.347749988 -0.444630494  0.568328617  0.651881598  0.637475976
 [831]  0.937096627  0.482633087  0.380543364  1.007940544 -0.420420924
 [836] -0.326436174  0.529630375  0.798038968  0.107993633 -0.759751034
 [841]  1.208899570 -0.647504231  0.394936561 -2.032542023  2.593750307
 [846] -0.175883877  1.001461333 -0.431916452 -3.426850158  1.067029854
 [851] -1.848885521  1.721468846  0.973563307  0.526552761 -0.717391436
 [856]  0.484320516  0.228580177 -0.312206831  0.933991877 -0.043563042
 [861] -0.079507828 -0.243467228  0.835452093  0.197361798 -0.165578505
 [866]  0.160290618  0.825870415  1.487819865  0.586244498  1.483171096
 [871]  0.861004376 -0.086366123  1.358558156 -0.575913943  1.537780276
 [876] -1.068653503 -0.129871143 -0.197475035  0.082696309  1.204430485
 [881]  0.203163501 -0.246538935 -0.072722101  2.000522706  0.324416357
 [886]  0.137221676 -1.634394533  0.178052691  0.384240226  0.020901034
 [891] -1.146064092 -1.867224426 -0.052323663  1.308471212  0.502773542
 [896] -0.582886063 -1.236787081  0.439046718 -1.324230746 -1.184053067
 [901] -0.024506356  0.440758511 -0.200202212  0.208602670 -0.093292790
 [906]  1.298758171 -0.644590231 -1.089759785 -0.564939050 -0.520962546
 [911]  1.043723312 -0.091107521 -1.126797146  0.064338203  0.007649654
 [916]  0.323848682  1.003895042  1.393261540  0.231288605 -0.335597870
 [921] -0.751804397  0.729698539  0.130803443 -0.268579382  1.407537419
 [926] -1.097705835  0.702011835 -0.016385359 -0.359333903 -0.610305329
 [931] -1.639323896  0.834627650 -1.742921887 -0.380836239 -0.496708400
 [936] -2.534803980 -1.240988304 -0.369571952  0.502739090 -0.312853561
 [941]  1.608353321 -0.788714131 -1.566975363 -0.200601439  0.637433106
 [946] -0.109782673 -0.325399182  0.333596011 -0.666632445  0.839081994
 [951]  0.792453420 -0.457702571  0.468933972  1.862925495  0.305014055
 [956]  0.531979533  0.732518005  0.852014265  1.118926603  0.128244939
 [961]  1.151918298  0.188390639  0.247419839 -0.329089945 -1.266627751
 [966] -0.348697892  0.144404672 -1.179447500  1.386877381  0.442008931
 [971] -0.435442475 -0.234223971  0.790534318 -0.632045723 -1.099336153
 [976] -0.420755855  0.146003348 -0.640413336 -1.974511268  0.028055121
 [981] -0.871134617  0.918029475  0.143473453 -2.088838002 -0.521565115
 [986]  0.156593276 -0.463624028 -0.030494888 -0.881849647  1.150089479
 [991] -0.367253808  0.327762565  1.908485561  0.948749994  0.679718108
 [996] -0.966994319  0.102723113 -0.053296940 -1.807560129  3.436988440</code></pre>
</div>
</div>
<p>See the difference? It’s subtle, but notice that the RMD chunk places braces around the <strong>r</strong> after the tick marks: <code>{r}</code>. In a normal markdown document, the braces won’t mean anything. But in an RMD document, it’s the difference between just printing the code and running the code before printing the code and its output.</p>
</section>
<section id="code-chunk-options" class="level3">
<h3 data-anchor-id="code-chunk-options">Code chunk options</h3>
<p>In our first code chunk, notice how we still load our libraries and set our file paths. For the libraries, we need to load knitr with <code>library(knitr)</code> in addition to whichever libraries we need for our analysis. As usual, we also load the tidyverse.</p>
<p>In addition to our normal analysis setup, notice that we add knitr-specific options in two places.</p>
<section id="local-code-chunk-options-only-affect-this-code-chunk" class="level4">
<h4 data-anchor-id="local-code-chunk-options-only-affect-this-code-chunk">Local code chunk options (only affect <em>this</em> code chunk)</h4>
<p>First, we can set <em>local code chunk options</em> within the braces that start the code chunk. These options will only affect this particular code chunk.</p>
<p>After <code>r</code>, the first word is the name of the chunk. I’ve called it <code>setup</code>, since that’s what this chunk is doing, but you can name it anything you want. It’s not strictly necessary to name your chunks, but it can come in handy as your documents become more complex: if you get an error, it’s much easier to find <code>data_input</code> chunk than <code>unnamed_chunk_38</code>. <strong>NOTE</strong> that all named chunks need to be unique or your document will not compile. If really like a particular chunk and want to reuse it, you can always add a number at the end: <code>data_input_1</code>, <code>data_input_2</code>, <code>data_input_3</code>, <em>etc</em>.</p>
<p>There are a lot of <a href="https://yihui.org/knitr/options/">options you can set</a> for your chunks. Here we set the following:</p>
<ul>
<li><code>echo=F</code> (FALSE): don’t repeat this code in output</li>
<li><code>include=F</code> (FALSE): run code, but don’t include output (unless a plot)</li>
<li><code>message=F</code> (FALSE): don’t output any messages</li>
<li><code>warning=F</code> (FALSE): don’t output any warnings</li>
<li><code>error=F</code> (FALSE): don’t output any errors</li>
</ul>
<p>As of <a href="https://github.com/yihui/knitr/releases/tag/v1.35">knitr 1.35</a>, you can also include chunk options in rows below the opening line using the <code>#|</code> symbol pair. We could rewrite our example options using:</p>
<p>However you choose to include them, these options keep our chunk from echoing the input code into our document and prevents any output. Basically, silence. Sometimes we want our code to echo; sometimes we want output. But since we are making a report, we generally want the underlying code to remain hidden. Readers of our report should only see the write up and any relevant tables and figures — but not all the hard coding we did to make them!</p>
</section>
<section id="global-code-chunk-options-affect-all-code-chunks" class="level4">
<h4 data-anchor-id="global-code-chunk-options-affect-all-code-chunks">Global code chunk options (affect <em>all</em> code chunks)</h4>
<p>After this first chunk, we can save some typing by setting these options for the rest of the document using <code>knitr::opt_chunks$set()</code>. Notice that we include the same settings as above plus a few more:</p>
<ul>
<li><code>fig.path</code>: path + prefix for all figures (put them in our <code>/figures</code> folder and add <code>"ts-"</code> to the name)</li>
<li><code>dpi</code> (dots per inch): the print quality of our figures; 300 dpi is a nice standard for print (72dpi is sufficient for most web output)</li>
<li><code>out.width</code>: our figures should fill the line width; if it’s an 8.5 by 11 inch page with 1 inch margins, then a width of 7.5 inches</li>
<li><code>comment</code>: if we return code output, don’t prepend with <code>#</code> or anything — just the output.</li>
</ul>
<p><a href="https://yihui.org/knitr/options/">There are other options we can use</a>. We can also override these setting as necessary for individual code chunks using local settings like we did in the first chunk (as you’ll see below). The main idea with the set up code chunk is to get our document settings as close as possible to the way we generally want them.</p>
</section>
</section>
<section id="chunk-to-chunk" class="level3">
<h3 data-anchor-id="chunk-to-chunk">Chunk to chunk</h3>
<p>Below, you see two code chunks with some Markdown text in the middle.</p>
<p>An important thing to remember is that your coding environment carries from chunk to chunk, meaning that if you read in data in the code chunk (named <code>input</code>) as <code>df</code>, then <code>df</code> will still be available to you in the next chunk (named <code>table_all</code>) after writing some Markdown text. This means that you can still organize your RMD scripts like your R scripts (no need to do everything at once in a single huge chunk).</p>
</section>
<section id="make-a-nicer-table-with-kable" class="level3">
<h3 data-anchor-id="make-a-nicer-table-with-kable">Make a nice(r) table with <code>kable()</code></h3>
<p>Since we want to show all of our data (which isn’t very big in this case) and because the data frame <code>df</code> already is organized in the way we want to show the data (school by year with different columns for each test), we can just print out the data frame. To be clear, often our data will be too big to do this, but in this instance, we are okay.</p>
<p>We could just print the data frame by calling <code>df</code> in a chunk. But to make it look nicer with a better format, we use <a href="https://bookdown.org/yihui/rmarkdown-cookbook/kable.html"><code>kable()</code> which is part of knitr</a>.</p>
<p>Even using mostly default options, <code>kable()</code> will make a nice looking table for us. We add <code>digits = 0</code> to make sure that we only show whole numbers and we change our column names to something nicer (leaving a blank <code>""</code> for the school name column, which is obvious). Notice that in the chunk braces we add <code>include = T</code> so that the output — our table — for just this one code chunk will be printed. This is an example of using local code chunk options to override global chunk options.</p>
</section>
<section id="inline-code" class="level3">
<h3 data-anchor-id="inline-code">Inline code</h3>
<p>You can also call R code <em>inline</em>, that is, R code that sits outside of code chunks proper and instead is mixed in with your Markdown text.</p>
<p>Inside the code chunk called <code>table_averages</code> we do three things:</p>
<ol type="1">
<li>Use <strong>dplyr</strong> to munge our data to get averages</li>
<li>Store names and scores for high test scores in distinct well named objects:
<ul>
<li><code>hi_&lt;test&gt;_sch</code>: school name with highest average math/read/science score</li>
<li><code>hi_&lt;test&gt;_scr</code>: highest average math/read/science score</li>
</ul></li>
<li>Make/print table using <code>kable()</code></li>
</ol>
<p>In the Markdown text below this code chunk, we call the values using the inline code method</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="in">`r `</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>that is, single back tick, an <code>r</code>, the code we want, then closing back tick. We also pipe the object value to the <code>round()</code> function so that we don’t return averages with extra and unnecessary decimal points. We could have simply run all the code inline (included what we did in step 2 of the code chunk above), but that would have made for extra messy code.</p>
<p>Why do this? One reason is that being able to incorporate data-driven values directly in your test is very powerful. Imagine you need to reproduce the same report on a monthly or quarterly basis when data are updated. Part of the written report includes values directly taken or calculated from the data. Rather than update these <a href="https://en.wikipedia.org/wiki/Magic_number_(programming)">“magic numbers”</a> each time (potentially missing some), you can use inline R code like we’ve done here. All you need to do then is update the data and recompile the report. Voila! Everything is properly updated.</p>
<p>Taking it a step further, you can include all kinds of <code>ifelse()</code> logic to make complex dynamic documents. <em>If</em> the value of <em>X</em> is equal to or greater than the value of <em>Y</em>, then print “equals or exceeds”; <em>else</em> print “remains less than”. Be aware, however, that your document text still needs to make sense. It can be difficult enough writing one clear sentence; having to write a sentence that will remain coherent despite variable inputs can be <em>very tough</em>!</p>
</section>
<section id="figures" class="level3">
<h3 data-anchor-id="figures">Figures</h3>
<p>Finally, making figures is pretty much the same as making tables:</p>
<p>Having reshaped our original data frame long (<code>df_long</code>), we make a figure just as we’ve done in the past — with some formatting improvements to make it nicer looking. While it’s not strictly necessary to store the figure in an object (<code>p</code>) that we then call, it works just fine.</p>
<p>Notice that again added <code>include = T</code> to the chunk brace. Because we added figure options to <code>opt_chunks$set()</code> in the setup code chunk, this figure (as well as the next one) is sized so that it fills up the page width (with height determined as a ratio of that width) and printed at 300 dpi quality. If you look in the <code>figures</code> folder, you’ll see the figure named <code>ts-fig_unadjusted</code>, which is the prefix we set above with the name of the code chunk.</p>
</section>
</section>
<section id="text" class="level2">
<h2 data-anchor-id="text">Text</h2>
<p>Throughout our RMD file, we’ve include Markdown text. This text lives outside of the code chunks and is always printed in the final document. It follows normal Markdown text rules, but can have R code placed inline, as we saw above.</p>
</section>
<section id="writing-an-rmd-document" class="level2">
<h2 data-anchor-id="writing-an-rmd-document">Writing an RMD document</h2>
<p>Just as when you write a plain R script, your progress from initial RMD draft to final product will be iterative. While you can run R code from inside code chunks just as you’ve been all semester, you may find it useful to start your analyses in plain R files first and only add them to an RMD document later.</p>
<p>For big projects, such as dissertation, it also doesn’t make much sense to put <em>everything</em> — data reading, cleaning, analysis, table/figure making — inside a single RMD document. You have to redo your entire workflow each time you compile! For large projects, it might make sense to do all the heavy lifting in separate R scripts — saving cleaned up data sets, tables, and figures along the way — and putting all the pre-establish pieces together at the end. But for small projects, such a descriptive policy report, a single RMD document might suffice.</p>
</section>
<section id="installing-latex" class="level2">
<h2 data-anchor-id="installing-latex">Installing LaTeX</h2>
<p>LaTeX is a document typesetting system/language. While it’s probably best known for its ability to nicely typeset mathematical equations, LaTeX works really well quantitative research workflows. That said, it can be difficult to install and work with.</p>
<p>We’ll use LaTeX later in the semester so that you can make nice PDF reports. The good news is that you won’t really need to interact with LaTeX at all to do so — other than to install it now.</p>
<p>Since you don’t need a full TeX distribution on your computer, you can most likely get by using the <a href="https://yihui.org/tinytex/">TinyTeX</a> distribution that we can install directly from R. If you want a full version of TeX on your computer (<strong>NOTE:</strong> It’s very large), then skip to the full installation for your computer.</p>
<section id="tinytex" class="level3">
<h3 data-anchor-id="tinytex">TinyTex</h3>
<p>Once you’ve installed R and RStudio, open RStudio and type the following in the Console:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tinytex"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will install the <code>tinytex</code> R package and then install the TinyTeX distribution (it may take a minute or two).</p>
</section>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>For this assignment, I want you to create a 1-2 page RMD document that uses <code>hsls_small.dta</code> to answer the following questions:</p>
<blockquote class="blockquote">
<p>Do educational expectations between a student and their parents generally differ? If so, which group tends to have higher expectations? Do differences vary by the parents’ own educational attainment?</p>
</blockquote>
<p>Your final file should include at least one figure and at least one table of summary statistics. The figure and table should be formatted nicely, with good axis labels and column names. You should explain your findings in the document text using Markdown syntax. You do not need to use or cite outside sources — just describe what you find. You also do not need to perform inferential tests (<em>e.g.</em> t-test of differences), though you can if you wish. I should not see input code in the final document — only the final clean output. In other words, it should look like a product you would give to a boss or would want given to you.</p>
<p>I recommend using <code>test_score.Rmd</code> as a template for how you should:</p>
<ol type="1">
<li>Read in the data</li>
<li>Wrangle the data as necessary to generate your analysis</li>
<li>Create any tables you may have</li>
<li>Create any figures you may have</li>
</ol>
<p>Feel free to repurpose any code you’ve seen in prior lessons, but make sure you answer the question to the best of your ability.</p>
<section id="submission-details" class="level4">
<h4 data-anchor-id="submission-details">Submission details</h4>
<ul>
<li>Save both your code file (<code>&lt;lastname&gt;_assignment_7.Rmd</code>) and compiled document (<code>&lt;lastname&gt;_assignment_7.pdf</code>) in your scripts directory.</li>
<li>Push changes to your repo (the new script and new folder) to GitHub prior to the next class session.</li>
</ul>
</section>
</div>
</div>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://capaldi.info">
<p>M.J. Capaldi</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://quarto.org/docs/websites">
<p>Built with Quarto</p>
</a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ttalVlatt/EDH-7916">
      <i class="bi bi-github" role="img" aria-label="Website Code Available Here">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>